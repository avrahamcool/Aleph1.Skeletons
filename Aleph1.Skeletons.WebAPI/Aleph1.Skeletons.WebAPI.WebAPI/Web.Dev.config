<?xml version="1.0" encoding="utf-8"?>

<!-- For more information on using web.config transformation visit https://go.microsoft.com/fwlink/?LinkId=125889 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
	<Aleph1.DI xdt:Transform="Replace">
		<base path="Modules\net48" />
		<modules>
			<module path="Aleph1.Skeletons.WebAPI.Security.Implementation.dll" />
			<module path="Aleph1.Skeletons.WebAPI.Captcha.Implementation.dll" />
			<module path="Aleph1.Skeletons.WebAPI.DAL.Implementation.dll" />
			<module path="Aleph1.Skeletons.WebAPI.BL.Implementation.dll" />
		</modules>
	</Aleph1.DI>

	<appSettings>
		<add xdt:Transform="SetAttributes" xdt:Locator="Match(key)" key="DocumentationDirPath" value="Documentation" />
		<add xdt:Transform="SetAttributes" xdt:Locator="Match(key)" key="EnableCORS" value="false" />
		<add xdt:Transform="Remove" xdt:Locator="Match(key)" key="Origins" />
		<add xdt:Transform="Remove" xdt:Locator="Match(key)" key="Headers" />
		<add xdt:Transform="Remove" xdt:Locator="Match(key)" key="Methods" />
		<add xdt:Transform="Remove" xdt:Locator="Match(key)" key="ExposedHeaders" />
	</appSettings>

	<system.webServer>
		<httpProtocol>
			<customHeaders>
				<add xdt:Transform="Insert" name="Content-Security-Policy" value="default-src 'none'; base-uri 'none'; object-src 'none'; frame-ancestors 'none'; connect-src 'self' https://www.google.com; script-src 'self' 'strict-dynamic' 'sha256-CHANGE_THIS' https://www.google.com https://www.gstatic.com; style-src 'self' https://www.gstatic.com 'unsafe-inline'; frame-src 'self' https://www.google.com; img-src 'self' data: blob: https://www.gstatic.com; font-src 'self' data: blob: https://fonts.gstatic.com; worker-src 'self' https://www.google.com https://www.gstatic.com; child-src 'self' https://www.google.com https://www.gstatic.com; media-src 'self'; form-action 'self'; require-trusted-types-for 'script'" />
				<add xdt:Transform="Insert" name="Strict-Transport-Security" value="max-age=16070400; includeSubDomains"/>
				<add xdt:Transform="Insert" name="X-Content-Type-Options" value="nosniff"/>
				<add xdt:Transform="Insert" name="X-Frame-Options" value="DENY"/>
				<add xdt:Transform="Insert" name="X-XSS-Protection" value="0"/>
			</customHeaders>
		</httpProtocol>
	</system.webServer>
</configuration>